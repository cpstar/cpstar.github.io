<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>怎样选出想要的TYPE-C扩展坞 | 中原之星★记录西皮星</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css">
<link rel="shortcut icon" href="https://page.cpstar.cn/favicon.ico?v=1728103215812">
<link rel="stylesheet" href="https://page.cpstar.cn/styles/main.css">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="《2021年分水岭般的4K60p》汇总了很多基础概念、相关知识，并且把数据拉出来分析了一番。而分析更加侧重于DP Alt Mode下显示数据和USB数据的分配问题，其他相关的情况没有提及，现实上对笔记本电脑具有直接意义。所以这个现实意义就体..." />
    <meta name="keywords" content="张大妈,干活,码农" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://page.cpstar.cn">
        <img src="https://page.cpstar.cn/images/avatar.png?v=1728103215812" class="site-logo">
        <h1 class="site-title">中原之星★记录西皮星</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/VZr6i90oH/" class="site-nav">
            迷火车
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/z-msk1pr2/" class="site-nav">
            迷代码
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/5_fCQ8_55/" class="site-nav">
            迷星空
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/tUEn37R--/" class="site-nav">
            迷实地
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
          <a class="social-link" href="https://weibo.com/cpstar/" target="_blank">
            <i class="fab fa-weibo"></i>
          </a>
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      记录Central Plain Star
    </div>
    <div class="site-footer">
      All rights with CPStar
Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><br/>
<a href="http://www.beian.miit.gov.cn/">京ICP备20007959号</a> | <a class="rss" href="https://page.cpstar.cn/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">怎样选出想要的TYPE-C扩展坞</h2>
            <div class="post-date">2021-11-01</div>
            
              <div class="feature-container" style="background-image: url('https://page.cpstar.cn/post-images/zen-yang-xuan-chu-xiang-yao-de-type-c-kuo-zhan-wu.jpg')">
              </div>
            
            <div class="post-content" v-pre>
              <p><a href="https://page.cpstar.cn/post/2021-nian-fen-shui-ling-ban-de-4k60p/">《2021年分水岭般的4K60p》</a>汇总了很多基础概念、相关知识，并且把数据拉出来分析了一番。而分析更加侧重于DP Alt Mode下显示数据和USB数据的分配问题，其他相关的情况没有提及，现实上对笔记本电脑具有直接意义。所以这个现实意义就体现在Type-C扩展坞的选择上，本文则补全这一块。</p>
<!-- more -->
<p>文章发布于<a href="https://post.smzdm.com/p/axlmw234/">什么值得买 - 【避坑指南】怎样选出想要的TYPE-C扩展坞</a></p>
<h1 id="前情摘要">前情摘要</h1>
<p>书接上篇《【避坑指南】2021年分水岭般的4K60p》，那篇文章里汇总了很多基础概念、相关知识，并且把数据拉出来分析了一番。而返回头再来看那篇文章的话，最后的分析更加侧重于DP Alt Mode下显示数据和USB数据的分配问题，其他相关的情况没有提及，现实上，对笔记本电脑具有直接意义。所以这个现实意义就体现在Type-C扩展坞的选择上，本文则补全这一块。</p>
<p>针对Type-C、DP Alt Mode这个问题，我又反复研究了个别扩展坞配件，及其拆解视频，积累了一些知识。于是在此继续分享，明确一些知识，看看如何在Type-C扩展坞的选购上避坑。当然了，鉴于本人的风格——知其然知其所以然，本篇还会侧重一些理论知识。只不过这次会比上回稍微实用一些。不过我还是坚持，知道怎么回事之后，根据自己的实际情况，来选择设备。</p>
<h1 id="type-c扩展坞到底什么原理">Type-C扩展坞到底什么原理</h1>
<p>历史上，由于没有统一的实施方案，实现主机接口的外部扩展，只有主机大厂才具备自定义能力，以及生产真·扩展坞的实力，比如最早期IBM ThinkPad的底部接口及其各型底座，以及后期联想在历代机型中开发过的如OneLink、OneLink+等各种接口；同期一些小厂没有主机的设计能力，只能在USB上做文章，弄出了多种USB-Hub。</p>
<p>而现如今，随着DP Alt Mode这项关键标准的制定，以及接口形式的Type-C化统一，外置扩展坞可以不再需要设计专用接口，主机厂、外设厂可以凭借统一的接口各自为战。同时相应芯片的低成本化，以往小厂不能做的事情，现在信手捏来。于是，我们实际看到了一个从几十元到上千元价格跨度的产品集合。知其然知其所以然，我们来大致认知一下相关内容。</p>
<figure data-type="image" tabindex="1"><img src="https://page.cpstar.cn/post-images/1635988058824.png" alt="主机端、设备端原理图" title="主机端、设备端原理图" loading="lazy"></figure>
<p>在一个实现了显示输出的扩展坞的主机端和设备端基本如图示结构。其中最关键的就是双侧的MUX芯片（multiplexer数据选择器）。由于Type-C线缆中的线路有限，显示和数据共六路信号要通过四路主干数据通道传输，于是双侧的MUX均只能取舍，要么给4Video+0USB，要么2Video+2USB，这也就是DP Alt Mode——上篇有介绍。插上数据线，双端的主控芯片相互握手，确定MUX状态，作为下游输出的设备端向主机端明确到底是4+0还是2+2。但是实际上，设备端（扩展坞）的控制芯片（Dock Controller）在出厂时已经通过固件设定了一种模式，即2+2，甚至有一些设备直接省略了这个芯片用硬连线实现2+2。</p>
<p>第二个关键的芯片，个人认为应该是Video Sink。大家的Type-C扩展坞买来普遍是想要显示输出的，而这个芯片就决定了到底输出能力如何。从主机显卡过来的信号，经过两层MUX，再到这个芯片，是2Lane的DP信号，按照HBR2的能力顶格8.64Gbps（仅够4k30hz），按照HBR3的能力那就能到12.96Gbps（满足4k60hz8bit）。然后这个芯片传话给DP或者翻译成HDMI甚至转码为VGA，通过物理接口将数据发送出去，根据芯片的能力实现接口输出的能力。而另外一个较为关键的芯片USB-Device，那就是各种扩展了，上游MUX能够给到2*5Gbps的能力，下游扩展USB-C、USB-A、网卡、耳麦（声音芯片）、SD/TF读卡器，以及各种能够通过USB扩展出来的新鲜玩物。</p>
<h1 id="具体案例">具体案例</h1>
<h2 id="thinkpad-usb-c-dock-gen-2-40as">ThinkPad USB-C Dock Gen 2 （40AS）</h2>
<p>经过比选，我为新笔记本电脑配置了这个扩展坞，设备能力在此官方说明：ThinkPad USB -C Dock Gen 2（我个人倾向于到美国网站看说明，比较全而且内容清晰完整，照顾大家我切了繁体中文，其实看英文会更准确）。拆开之后，板子和芯片说明那个如下。</p>
<figure data-type="image" tabindex="2"><img src="https://page.cpstar.cn/post-images/1635988079177.png" alt="ThinkPad USB-C Dock Gen 2 主板" title="ThinkPad USB-C Dock Gen 2 主板" loading="lazy"></figure>
<p>可以看到，从右到左，首先经历了TUSB1064（详细文档：datasheet）这个MUX，旁边的CY7C65210（详细文档：CY7C65210, USB Billboard Controller）控制TUSB1064的工作状态，即4+0还是2+2。图上可以相对清晰的看到数据线走向，其中比较明显的是从TUSB1064左侧接出四对到VMM5322BJG（没有文档，只有介绍：视频接口IC，查找VMM5320）。燃鹅接出四对又怎样，控制芯片锁死了2+2模式。但无论如何，2Lane的DP经过这个芯片转换成2<em>DP 1.4接口和1</em>HDMI 2.0接口。再往左走，TUSB1064的其他一些接线通过穿板走到VL820-Q7（文档：威鋒電子，一拖四的USB Hub），两路走USB-A 10Gbps，一路走下游VL820-Q8，一路走GL850G（一个USB2.0/1.1的USB Hub）。最后，VL820-Q8连接一个USB-C接口一个USB-A接口，以及一个网卡控制器RTL8153B和一个音效CX21985。整个板子的结构就这样弄清除了个大概，那是不是一下子会看板子了呢。</p>
<p>其中两个重点，一个是MUX芯片（TUSB1064），看其详细的数据指标文档，提到了支持DP 1.4支持USB 10Gbps，而且可以由GPIO或者I2C来控制4+0还是2+2，但是很明显，控制芯片（CY7C65210）的固件写明白了就是2+2。甚至我还找到了这个扩展坞的固件升级程序，确实有一个小组件是控制芯片的固件，但是全是无法猜透的编译二进制文件，只能作罢。另外一个就是VideoSink芯片（VMM5322BJG），这个芯片一样支持DP 1.4 / HBR3，要注意这一点，这个芯片输出两路DP 1.4和一路HDMI 2.0，所以它会混流，从上游主机端以DP 1.4 / HBR3 / 2Lane进行通信，达到12.96Gbps的带宽，然后向下游三个输出端口根据显示器的能力输出信号。但这里有一个超纲题，我利用这个盒子做到了4k60hz8bit + 2k60hz8bit，按照带宽加和，应该是12.54+5.63=18.17&gt;12.96，这点我没有想透，也许开启了DSC。</p>
<h2 id="戴尔da310">戴尔DA310</h2>
<p>一款好用不贵而且设计很有特色的产品，对比DA300主要指标是多了PD。</p>
<figure data-type="image" tabindex="3"><img src="https://page.cpstar.cn/post-images/1635988110963.jpg" alt="DA310结构拆解，图片来自知乎Leaves" title="DA310结构拆解，图片来自知乎Leaves" loading="lazy"></figure>
<p>这个扩展坞功能上，没有什么硬伤。线缆直接分拆两个板子，通过主机端的MUX实现Type-C的正反插判断，既然都硬走线了，肯定2+2。两个板子分别是视频子板（以及PD功能）和数据子板。视频子板最大的芯片是RTD2182S，实现了HDMI、VGA、DP以及进一步USB-C DP Alt Mode的输出。至于数据子板上，FL5500提供了1拖4 USB3 HUB，两路USB-A输出，一路到RTK8153网卡，空置一路。</p>
<h2 id="dockcase-dpr91s">DockCase DPR91S</h2>
<p>一款神奇的产品，神奇在于，前边说了除了硬连线，如果通过控制芯片，是可以控制MUX进行4+0和2+2的切换的，而且如果把这个做到运行时动态切换，那岂不美哉。之前有过一款产品是有一个切换的拨动开关，而本款产品，通过配置实现“软”设置。</p>
<figure data-type="image" tabindex="4"><img src="https://page.cpstar.cn/post-images/1635988121449.png" alt="PS8822逻辑结构，图片来自官网" title="PS8822逻辑结构，图片来自官网" loading="lazy"></figure>
<p>这款设备采用了PS8822（PS8822 – USB-C® Retiming/Redriving Switch for USB 3.2 Gen 2x1 device and DP HBR3 Sink），支持USB 3.2 Gen 2(10Gbps)和DP Alt Mode / DP 1.4 HBR3。但是这款设备的Video Sink选用了相对价格低廉的PS186（PS8822 – USB-C® Retiming/Redriving Switch for USB 3.2 Gen 2x1 device and DP HBR3 Sink），将DP 1.4转换成HDMI 2.0，这其中从带宽方面看HDMI 2.0的14.4Gbps成为瓶颈——别忘了盒子还能设置为4Lane模式，那将是25.92Gbps的超级带宽，可惜了。别的，这款盒子就没有什么特别项了：FL5500除了USB-A口，下游接RTL8153网卡和GL3231S SD/TF读卡器。</p>
<h2 id="绿联8k-usb-c扩展坞">绿联8K USB-C扩展坞</h2>
<p><a href="https://item.jd.com/10032355009147.html?cu=true">绿联Type-C扩展坞8KUSB-C转HDMI2.1转换器3.0分线器适用笔记本电脑接电视大屏8K拓展坞转接头3.0HUB集线器</a></p>
<p>绿联最近出品的一款扩展坞，亮点是HDMI 2.1，终于摆脱了14.4Gbps的束缚，可以迈向至少4k60hz10bit (15.68Gbps)，当然HDMI 2.1的总体能力是能够支撑到8k30hz10bit乃至8k120hz10bit（DSC压缩）。拆开来看，没有MUX芯片，没有控制芯片，只有三个芯片：PD、USB、Video。线路上，2+2定死，那么即便HDM 2.1，受到上游只有DP 1.4 / HBR3的话，最大仍然是12.96Gbps，这么说HDMI 2.1还是2.0，无所谓喽。从芯片看，采用VMM6110，上游也仅支持HBR3，即便将来连接一台DP 2.0的主机，对不起，这个盒子还是怂。当然从芯片的维度，支持4Lane输入，那就是25.92Gbps了。</p>
<h1 id="雷电34">雷电3/4</h1>
<p>以上说的都是DP Alt Mode，Type-C的四对数据线中既要承载数据又要承载视频，然后各自找各自的线，各自传各自的信号。而雷电呢，则高端多了，雷电双端其实也都有MUX型的东西，只不过这个芯片更高端，可以干更高级的事情——将数据混流。</p>
<figure data-type="image" tabindex="5"><img src="https://page.cpstar.cn/post-images/1635988131628.png" alt="雷电4原理图" title="雷电4原理图" loading="lazy"></figure>
<p>TB4的总带宽与TB3一样是40Gbps，相当于每条数据通道提供了10Gbps的能力，TB Switch将上游过来的PCIe和DP信号进行混流，统一打包塞给对端的TB芯片，对端的TB芯片解码分流，再给下游的相应芯片用于输出。于是这就不再局限于到底是4+0还是2+2了，这是4/4的模式。当然了，高端的能力，总是需要高端的价格来表现其高端。</p>
<h1 id="总结">总结</h1>
<p>设备千千万，价格高高低。我们始终没有足够的钱把所有设备都买来实验出到底哪个适合自己，但是通过网上的各类评测，我们能知道大概。可是现在的评测灌水与否，虽不是普遍，但也无法控制良莠。那干脆，自己搞清楚其内在逻辑，通过拆解文章，看到其中的芯片版型架构，进而搜索相关资料，得出自己的结论——别人说始终是别人说，自己说才是自己说。</p>
<p>希望第二篇略深奥的文章—划掉—文档，能够给大家提供一些进一步的知识。</p>
<h1 id="补充">补充</h1>
<ul>
<li>关于雷电3、4，还有一些带宽上的限制，比如雷电3的数据带宽有22Gbps的限制，雷电4将这个带宽提升到了32Gbps。相当于雷电3硬划分了18Gbps给DP通道，雷电4最小预留8Gbps给DP通道。实际使用上，如果上了双4k60hz10bit，那将是15.64Gbps+15.64Gbps的视频带宽，数据带宽就只剩下了8Gbps。</li>
<li>（单接口）扩展坞的产品非常多样，价格在100-300元区间，一个HDMI输出，两三个USB-A输出，或者有RJ45网卡接口，或者有SD/TF读卡器，甚至还有一些带有USB-PD，但可以说，普遍采用了2+2的硬连线方案，最多做一个固件写死的MUX芯片，这种设备能够支持DP 1.4那能够满足4k60hz8bit，上HDR普遍靠8抖10。</li>
<li>有部分产品具有两个Type-C接口，那就相对简单了，一个接口负责4+0的全视频信号传输，而另一个则全负责USB数据信号的处理，这样你就可以理解为是两个扩展坞，即便是物理上它是一个盒子。</li>
<li>Type-C接口上四对数据线，在DP信号看来因为是单向传输，所以是四条通路；而在USB上看来，因为既收又发，所以算作两条通路，即USB 3.2 Gen 2x2中x2的意义——两条通道。文章中均以DP视角讨论。</li>
</ul>
<p>最后谈论（吐槽）一下接口，Type-C看似一线通，但是接口设计在如今的数据需求上已经显现短板。特别是这个接口为了兼容USB2.0/1.1这样的设备，为了兼顾正反盲插的操作，在A6/7和B6/7占用了两对数据通路（能力达到5Gbps*2）却只满足了480Mbps的需求，严重浪费——所以RTX 2080Ti显卡上的Type-C接口将这两对数据通路用于了传输VR视频数据。这样的接口设计还将在USB4/TB4上延续，接口标准应当适时做一修正了。</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://page.cpstar.cn/tag/CQxFj5t3u/" class="tag">
                    张大妈
                  </a>
                
                  <a href="https://page.cpstar.cn/tag/tUEn37R--/" class="tag">
                    干活
                  </a>
                
                  <a href="https://page.cpstar.cn/tag/z-msk1pr2/" class="tag">
                    码农
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://page.cpstar.cn/post/2021-nian-fen-shui-ling-ban-de-4k60p/">
                  <h3 class="post-title">
                    2021年分水岭般的4K60p
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
