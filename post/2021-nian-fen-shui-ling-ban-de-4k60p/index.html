<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>2021年分水岭般的4K60p | 中原之星★记录西皮星</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css">
<link rel="shortcut icon" href="https://page.cpstar.cn/favicon.ico?v=1728103215812">
<link rel="stylesheet" href="https://page.cpstar.cn/styles/main.css">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="2021年了，跟随着摩尔定律，我们的设备标准普遍更新了一茬，在显示维度上，什么4k、HDR、60hz、DP1.4、HDMI2.0，当然更有甚者超越时代发展，走向了5K甚至8K。本人最近各种迫于，一样更新了一些设备，然后在设备到位后，在各种调..." />
    <meta name="keywords" content="张大妈,干活,码农" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://page.cpstar.cn">
        <img src="https://page.cpstar.cn/images/avatar.png?v=1728103215812" class="site-logo">
        <h1 class="site-title">中原之星★记录西皮星</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/VZr6i90oH/" class="site-nav">
            迷火车
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/z-msk1pr2/" class="site-nav">
            迷代码
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/5_fCQ8_55/" class="site-nav">
            迷星空
          </a>
        
      
        
          <a href="https://page.cpstar.cn/tag/tUEn37R--/" class="site-nav">
            迷实地
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
          <a class="social-link" href="https://weibo.com/cpstar/" target="_blank">
            <i class="fab fa-weibo"></i>
          </a>
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      记录Central Plain Star
    </div>
    <div class="site-footer">
      All rights with CPStar
Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><br/>
<a href="http://www.beian.miit.gov.cn/">京ICP备20007959号</a> | <a class="rss" href="https://page.cpstar.cn/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">2021年分水岭般的4K60p</h2>
            <div class="post-date">2021-05-28</div>
            
              <div class="feature-container" style="background-image: url('https://page.cpstar.cn/post-images/2021-nian-fen-shui-ling-ban-de-4k60p.png')">
              </div>
            
            <div class="post-content" v-pre>
              <p>2021年了，跟随着摩尔定律，我们的设备标准普遍更新了一茬，在显示维度上，什么4k、HDR、60hz、DP1.4、HDMI2.0，当然更有甚者超越时代发展，走向了5K甚至8K。本人最近各种迫于，一样更新了一些设备，然后在设备到位后，在各种调配上，陷入了深深的思考，最终决定把思考整理成文字，让自己的思路清晰起来，让大家能够更好的选择自己的设备，避免入坑。</p>
<!-- more -->
<p>文章发布于<a href="https://post.smzdm.com/p/636483/">什么值得买 - 【避坑指南】2021年分水岭般的4K60p</a></p>
<h1 id="前情提要">前情提要</h1>
<p>2021年了，跟随着摩尔定律，我们的设备标准普遍更新了一茬，在显示维度上，什么4k、HDR、60hz、DP1.4、HDMI2.0，当然更有甚者超越时代发展，走向了5K甚至8K。本人最近各种迫于，一样更新了一些设备，然后在设备到位后，在各种调配上，陷入了深深的思考，最终决定把思考整理成文字，让自己的思路清晰起来，让大家能够更好的选择自己的设备，避免入坑。</p>
<p>为什么恰巧4K60P成了分水岭，且看文章详细叙述。</p>
<h1 id="名词解释">名词解释</h1>
<p>工欲善其事必先利其器，咱们先捋一下各种名词，其实主要是其性能。</p>
<ul>
<li>DisplayPort 1.4</li>
</ul>
<p>DisplayPort目前按照标准，已经发展到了2.0，但设备支持上，普遍还是1.4。按照DP标准的表述，DP设置了4对数据线来进行差分数据传输，4对数据线对应着设计的4条数据通道，即4 Lanes。</p>
<figure data-type="image" tabindex="1"><img src="https://page.cpstar.cn/post-images/1622213234051.jpg" alt="DP针脚定义" loading="lazy"></figure>
<p>从DP1.0一直到DP2.0，4条数据通道按照传输方式，每一代都能传输不同的数据量，相应的标准分为RBR、HBR、HBR2、HBR3、UHBR 10、UHBR 13.5、UHBR 20，其对应的数据传输能力如表。</p>
<figure data-type="image" tabindex="2"><img src="https://page.cpstar.cn/post-images/1622213317130.png" alt="DP版本和数据能力" loading="lazy"></figure>
<p>我们现在只讨论DP1.4的情况，所以只看那些个绿色的，也就是只能支持到HBR3。至于之前的DP1.2，自行参照本人考虑数据能力和设备效果。其中DP1.4+HBR3，每条通道能力8.1Gbps，但按照其编码格式（仍为8bit/10bit）存在冗余校验传输位，所以实际传输能力打八折，实际传输能力为每条通道6.48Gbps，两条通道则是12.96Gbps，四跳通道则是25.92Gbps——为什么要提一嘴两通道，后问会用到。</p>
<ul>
<li>HDMI 2.0</li>
</ul>
<p>HDMI其实是早于DP接口标准制定的，而且是由一票家电厂商（不同于DP主要是由电脑厂商完成），目的是为了解决一线通的问题，视频、音频，甚至还做了一些反向回传的功能比如ARC。来到2021年，其实HDMI 2.0早几年就全面铺开了，2021年更应该讨论HDMI 2.1，但是到了2021年，更多的设备还是支持HDMI 2.0，HDMI 2.1只在家电（电视）领域更多的铺开，显示器领域普遍还是2.0。</p>
<figure data-type="image" tabindex="3"><img src="https://page.cpstar.cn/post-images/1622213383320.png" alt="HDMI针脚定义" loading="lazy"></figure>
<p>相较于DP，HDMI在家电领域要关注更多的事情（比如刚才提到的音频反传ARC），在数据传输量上，碍于面板分辨率等发展步伐，HDMI的发展并不像DP那样甩开包袱迈大步。在数据传输能力上，HDMI 2.0并没有DP 1.4来的猛。</p>
<figure data-type="image" tabindex="4"><img src="https://page.cpstar.cn/post-images/1622213420357.png" alt="HDMI版本和数据能力" loading="lazy"></figure>
<p>等同于DP，在HDMI 2.0中，虽然传输数据的最大值为18Gbps，但同样因为8/10编码，实际数据能力要打八折，也就是14.4Gbps。</p>
<ul>
<li>4K 60Hz 10bit</li>
</ul>
<p>4K不用说了，3840<em>2160，亦称为2160p，四倍于FullHD/1080p；60Hz为屏幕刷新率，即每秒钟画面刷新60次前述的3840</em>2160个点，低于这个刷新率，比如30Hz，在电脑领域，估计大家都是肉眼可见的反应迟钝，而在电视领域，这个事情倒没有那么严重，所以命题为4k60p；10bit为色彩灰度级，大家对色彩的要求越来越高，曾经8bit已经满足不了我们的眼睛，我们要求更高级的10bit来呈现所有色彩，而面板上，过渡期的8抖10也不再成为今天的话题，10.7亿色成为了标配，那10bit和10.7亿色有什么关系呢？按照显示原理，一个颜色被分为红绿蓝三色也就是RGB，每个颜色用10个二进制位表示，也就是2¹⁰=1024，三种颜色就是2¹⁰<em>2¹⁰</em>2¹⁰=2³⁰=1 073 741 824，而8bit则是2²⁴=16 777 216即1677万或表述为16.7M。至于HDR是什么，按照HDR10标准的要求，色彩灰度级必须10bit。也许某天HDR的标准提升了，变成了HDR12、HDR16，那数据量就再说吧。</p>
<p>那么4K 60Hz 10bit需要多大的数据传输量呢？原则上可以这么计算，3840<em>2160</em>60<em>30=14 929 920 000≈14.93Gbps，但实际上给屏幕的传输数据并不是单纯的3840</em>2160个点，每秒钟60次这么多点，每个点一共30位二进制数据，还要传输一些其他同步数据。具体这个事情我就不详细描述了，上追的历史太多，总之一个4k 60p 10bit需要15.84Gbps的数据能力。详细各个档次如下表。</p>
<figure data-type="image" tabindex="5"><img src="https://page.cpstar.cn/post-images/1622213467879.png" alt="各分辨率数据需求表" loading="lazy"></figure>
<p>其中我将4K30和4K60做了高亮，一会用到。</p>
<ul>
<li>DSC</li>
</ul>
<p>按照DP和HDMI的原始标准，数据传输都是原始数据，不经过压缩的，跟别说像MP3、JPG这种取巧扔掉一些人无法感受到信息的有损压缩。但是随着画面越来越大，数据量越来越大，从DP 1.4和HDMI 2.1开始，引入了压缩算法，即Display Stream Compression 1.2，最高压缩比例大概3:1。有了DSC的加持，DP 1.4+HBR3得以支持到8K75p10bit，否则只能期待DP 2.0解决问题（甚至DP 2.0都无法解决所有问题），而最新的HDMI 2.1则只能干到8k30p10bit。在此，注意一下，从DP 1.4开始，才支持DSC。</p>
<ul>
<li>RGB、YCbCr</li>
</ul>
<p>又是一个跟数据需求量计算中有关的视频行业历史脉络问题的事情。我们大多数理解了三基色RGB混合所有颜色，但是这个世界还有其他颜色的描述方式，比如印刷行业使用CMYK，以及这里提到的YCbCr，好像亦称YUV，本人对这个行业不是那么熟悉，具体的大家自己查阅资料，这里只说一键事情，还是与色彩灰度级有关。一般情况下电脑体系使用RGB传输数据，8bit的话8bitR+8bitG+8bitB，这个事情其实也没得动，否则那一个颜色点就无法表述了，而YCbCr/YUV则不同，他允许“插值”描述每个颜色点，即YUV 4:4:4、YUV 4:2:2、YUV 4:2:0。昨晚恶补了一下，大致实现原理是，“以时间换空间”，将某些数据加上时间维度，一次传一次不传，减少了数据传输量。过程请各位自行学习，大抵就是YUV 4:4:4=RGB，YUV 4:2:2=⅔RGB，而YUV 4:2:0=½RGB，那么显然，在数据能力不足的情况下，要么DSC压缩数据，要么用YUV 422或420减少数据。但是这就得看显卡、接口、显示器等多方的能力了。按照我的Intel显卡来看，只有在HDMI接口的情况下，才能设置YUV及其数据格式，而A家N家好像都是能够轻易配置的。</p>
<ul>
<li>递色/抖动/Dithering</li>
</ul>
<p>同前述YUV 422/420一样，以时间换空间的一种手法，之前大家耳熟能详6抖8，就是6bit的面板通过“抖动”实现8bit，于是出现了16.2M颜色的面板。然后同样的事情在现在还在发生，只不过不再是面板软硬件机构上的抖动，而是数据传输上的抖动，等同于前述，通过8bit抖动到10bit，在与SDR同样的数据传输量下，实现10bit HDR的支持。而抖动的原理是个啥呢，大概是：以8抖10来说，用0-255这8位二进制数来表示0-1023这10位二进制数，比如0还是0，但不仅是0，还代表1、2、3，1呢则代表4、5、6、7，依序下去，255代表1020、1021、1022、1023，那真正的1怎么才能表述出来呢，在时间维度上，可以安排四个连续时间片来承载，0还是0000，1就是0001，2就是0011，3则是0111，其0代表不亮，1代表亮到1。这里跟PWM调光的原理是一样的，亮度50%其实就是一半时间全灭一半时间全亮。同时前述的YUV也是类似原理，只不过讲解起来没有这个简单。所以为啥叫抖动，我觉得很形象，达不到中间状态，只能靠左右蹦跶，来“抖”成中间状态。</p>
<ul>
<li>DP Alt Mode</li>
</ul>
<p>说到现在的DP，不能不提USB Type-C这个接口形式。一些厂商搞事，想在USB Type-C接口上承载视频输出，于是乎东鼓捣西敲打，最终整出了一个叫DP Alternate Mode的东西，在Type-C上承载DP数据流。</p>
<figure data-type="image" tabindex="6"><img src="https://page.cpstar.cn/post-images/1622213544370.png" alt="USB-C针脚定义图" loading="lazy"></figure>
<p>从USB-C的针脚定义上，最关键承载大通量数据的是A2/3、B2/3、A10/11、B10/11，同时USB-C是支持正反插的，所以这四个位置是对称布局的。那么DPAM就是通过相关握手信号数据，在着四对数据线上混合承载DP信号和USB3信号。这也就是如何实现一个口既能输出USB又能输出DP，甚至DP和USB同时用。这四条数据线，又分成两对，三种情况：4条USB3（实现USB3 Gen 2*2 20Gbps），4条DP，和2USB3（USB3 Gen 2 10Gbps）+2DP。然后最后一种情况，就是既能USB又能DP，但是，注意但是，DP只有两条数据链路传输，所以为什么前文会提到一个两通道DP的事情。</p>
<ul>
<li>雷电3/4</li>
</ul>
<p>雷电1、2不说了，历史的车轮碾压过了。雷电3开始，统一到了Type-C接口，做到了40Gbps的总带宽，同时也支持视频、数据等一股脑的数据传输。不同于前文的DPAM，他是怎么做到视频和数据的一线通呢？因为雷电芯片。不同于DPAM在线路上做文章，雷电芯片直接将所有数据都汇集到芯片上，然后混合打包，再塞给端芯片，端芯片解包，最后各回各家各找各妈。雷电4在雷电3的基础上，并没有太多改进，总带宽保持了40Gbps，但是内部在PCIe总线上，带宽增加，具体的，我也没怎么研究，不瞎说了。</p>
<ul>
<li>扩展坞</li>
</ul>
<p>最后说这个。有形的，台式机不说，笔记本方面，都会搞一个外置的扩展坞，想办法把视频和数据分离出来，当然还有USB-PD这种东西，一线搞定所有事情。然而这个市场乱象，除了价格高位的雷电3/4扩展坞，普通扩展坞从百十块钱的到一千以内的，花样百出，更有甚者“花了一个肾的钱去填扩展坞的坑”这样的事情。为什么要说扩展坞，就是结合DP Alt Mode，实现扩展坞上既能DP又能USB，那就只能是2+2的模式，于是带宽就成了问题。其实本文所有内容，都是基于这个扩展坞展开的。而搞清楚本文之后，你的扩展坞选择，业务就不那么盲目了。</p>
<p>当然，还有一个叫DisplayLink的东西，这个是在软件层面压缩了数据，然后到扩展坞上解压缩，并且塞给DP输出，所以电脑端需要安装一些驱动，而且还出现了Mac系统不好用的故事。</p>
<h1 id="数据说话">数据说话</h1>
<p>上边了解了基本知识，开始放大招，把所有东西汇集到一起来避坑。</p>
<figure data-type="image" tabindex="7"><img src="https://page.cpstar.cn/post-images/1622214854212.jpg" alt="数据对比" loading="lazy"></figure>
<p>选取了部分分辨率格式，2k分辨率下的60、120、144三种刷新，以及4k下30Hz和60Hz，再高那就自己查数据对比去吧，四条柱状分别是SDR 8bit、SDR 8bit+DSC、HDR 10bit、HDR 10bit+DSC，这些数据都是基于RGB展开，如果结合YUV 422/420，那继续计算。画了三条杠杠，分别对应着DP 1.2/3/4可以使用的HBR2数据格式，红色是2Lane也就是两条数据线，蓝色4Lane，绿色则是DP 1.4中引入的HBR3的2Lane情况，还有4Lane因为能够达到25.92Gbps，一切通吃，就不在图上画了。</p>
<p>那怎么看这个图呢，这就得加上DP Alt Mode这个事情了。前文书说，基于Type-C口的话，不用雷电3/4的话，只有2+2这种模式，那么上边那条蓝杠杠你就不用考虑了，么有自行车。所以分水岭出现了4k30和4k60，一个红线以上一个红线以下。为什么以红杠杠（HBR2/2Lane）作为分水岭呢，因为此时此刻，受限于部分显示器、部分扩展坞、部分笔记本，甚至部分线缆，红线以上要小心翼翼，红线以下可以不用带脑子随便搞。当然了，2k120/140和2k60也是分水岭，只不过这样的显示器普遍都是高刷游戏显示器，笔记本玩游戏么，我个人觉得还是台式机和等矿难更舒爽些。</p>
<p>所以结论出现，如果想做到妥妥的4k60（SDR），HBR3/2Lane是底线，而这个HBR3则严格需要DP 1.4来支持。而这种情况下，还有杯具发生，它不支持4k60 HDR，如果希望支持，只能靠DSC把数据量压下来，或者前边提到的8bit抖10bit（Windows 10 较新版本的显示高级设置中会有所显示）。</p>
<p>当然了，这都是基于一根线上你既要熊掌（显示）又要鱼（USB）而且还没钱（不买雷电）的结果。如果一根线就搞显示、另一根线就搞USB，或者砸银子上雷电，那一切都好说，只要支持DP 1.4，就算是HBR2数据格式，都能轻松完成4K 60 HDR——对了，2K 144P HDR可能还是不够的，但是我觉得这样的显示器，肯定能完美支持DP 1.4/HBR3，所以仍然不是问题。</p>
<p>接下来提一嘴HDMI的问题，我们知道HDMI 2.0其实是一个很早的标准了，现在执行的也都很好。但是对于扩展坞来讲，普遍还是以DP信号输入的，也就是2+2的模式，那么其带宽上线还是受制于2 Lane问题。然后扩展坞本身一般会安排一个芯片把DP信号转换为HDMI信号，所以HDMI 2.0所提的14.4Gbps的数据量，一般不会是瓶颈。</p>
<p>最终总结避坑之点，你要明白你的源设备有哪些输出，type-c？hdmi？甚至DP？你用到哪些中间设备，扩展坞？雷电3/4？这些扩展坞中的相关芯片是否支持DP 1.4？你的显示设备能支持到什么？DP 1.2？准DP 1.4？全DP 1.4？（什么叫“准”，什么叫“全”，我强迫你看完我的文章，😎）</p>
<h1 id="我的实战">我的实战</h1>
<p>开篇说我换了设备，换了什么暂且保密，马上要发一个首发文，详细去聊。但是这个设备比较标准，牙膏厂11代，一个雷电口一个USB3.2口，都混合了PD和DP，额，USB-PD和DisplayPort 1.4。在选购机器前，比选了一圈买了一款扩展坞。此前自己有笨球的PD2700U，旁边后来还发现一台戴尔U2720QM。</p>
<p>好，开始讲述我这几天来的纠结。通过新设备和新扩展坞，PD2700U只能4k30p8bit，抖到10bit，扩展坞上有HDMI，能到4k60p8bit，Windows不识别显示器的HDR。绕过扩展坞，直接走Type-C to DP到PD2700U，什么毛病都没有，4k60p10bit妥妥的。然后我心说机器明确了DP 1.4，扩展坞也明确说支持4k60p了，怎么个情况？我陷入了深深的思zhua考kuang。查wiki，算数据，怎么想也不可能啊，结果一个偶然一查，PD2700U特喵的不支持HBR3，人家官网冠冕堂皇地说，这是市场常规，当然了，你也无法对一款2018年的设备苛责太多，只能是我掉坑里了。这就是我所说的“准DP 1.4”，『VESA authorized certification agency certifies monitors with HBR2+HDR10 as DP1.4』。爬出这个坑，对数据规模也稍微有了了解，而旁边的U2720QM再入一坑。首先说，我个人还是期望用扩展坞的方式，一根线搞定一切，拔了线直接走人——将来那篇文章会详细讲这个习惯怎么来的，而买新扩展坞也是花了不少钱的，再花钱买雷电扩展坞，哎，哎，还是哎。然后拿到U2720QM，三个接口，DP、HDMI、USB-C，机器自带的USB扩展坞，三个A一个C，显示器支持设置高显示效果还是高数据传输（对应着DP4+USB0还是DP2+USB2）。测试了扩展坞搞DP，4k60p8bit没问题，10bit需要抖，显示器报告数据模式是HBR3，那实际正好是绿杠杠；测试了直接USB-C+高显示，4k60p10bit没问题，显示器报告用的HBR2，也就是蓝杠杠；测试了直接USB-C+高数据，与通过扩展坞结果一样。接下来，我再纠zhua结kuang怎么才能在有限的条件下实现无限的可能？我把目光投到了YUV和DSC上，结果前边说了，Intel的只有在显卡直接连接HDMI接口的情况下，才能调配YUV，而扩展坞也好，直接C-DP线也好，显卡都认为走了DP；而DSC上，搜了好多，反正U2720QM没说支持，坑在此，你快跳，最后什么叫“全DP 1.4”你知道喽。</p>
<h1 id="学习路上">学习路上</h1>
<p>在此做一些鸣谢吧，看了几篇文章，跟牛人讨论了几下，使劲翻看Wikipedia，学习各种知识，最终得来本文。</p>
<ul>
<li>知乎Leaves的<a href="https://zhuanlan.zhihu.com/p/342165494">Type-C 扩展器 方案指南（DP Alternative Mode 篇）</a>，关于DPAM，这篇文章学习了很多内容，而且还可以了解到很多扩展坞方面的芯片问题，从根本上解答百十元到小千元各类扩展坞该如何选择，当然他还写了很多其他文章，有需要的可以借鉴</li>
<li>少数派JohnHarrod的<a href="https://sspai.com/post/59194">为了买一个完美的雷电 3 扩展坞，我累计花掉了一台 iPhone 11 的钱</a>，比较调侃地说明了扩展坞这个坑，到底有哪些，经历了什么，还好我不是Mac用户，有些坑天然绕过</li>
<li>B站山东德州仪器厂的<a href="https://www.bilibili.com/read/cv3740195">「Q&amp;A 02」显示器“8抖10”的抖动原理</a>，深入浅出地描述了什么是抖，精神抖擞的抖</li>
<li>还有一些无名英雄，文章看完之后，有帮助，但是记不住了</li>
<li>最后是牛X的Wikipedia，对了，一定要看英文，中文过滤了很多信息</li>
</ul>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://page.cpstar.cn/tag/CQxFj5t3u/" class="tag">
                    张大妈
                  </a>
                
                  <a href="https://page.cpstar.cn/tag/tUEn37R--/" class="tag">
                    干活
                  </a>
                
                  <a href="https://page.cpstar.cn/tag/z-msk1pr2/" class="tag">
                    码农
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://page.cpstar.cn/post/shi-tan-shou-du-ji-chang-gao-su-zhi-du/">
                  <h3 class="post-title">
                    试谈首都机场高速治堵
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
